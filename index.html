<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>No Innocence</title>

<meta name="theme-color" content="#c9184a">
<link rel="manifest" href="manifest.json">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #ff4d8d, #c9184a);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  padding: 20px;
  color: white;
}

.container {
  background: rgba(0,0,0,0.25);
  backdrop-filter: blur(12px);
  padding: 30px;
  border-radius: 25px;
  width: 100%;
  max-width: 420px;
  text-align: center;
  box-shadow: 0 20px 50px rgba(0,0,0,0.3);
}

/* TITLE */
.title {
  font-size: 40px;
  font-weight: 900;
  letter-spacing: 3px;
  text-transform: uppercase;
  margin-bottom: 15px;
  animation: smoothPulse 4.5s infinite cubic-bezier(0.4, 0, 0.2, 1);
}

.title .no { opacity: 0.45; }

.title .innocence {
  text-shadow: 0 0 6px rgba(255,255,255,0.6),
               0 0 18px rgba(255,0,90,0.5);
}

@keyframes smoothPulse {
  0% { text-shadow: 0 0 6px rgba(255,255,255,0.5), 0 0 15px rgba(255,0,90,0.4); }
  50% { text-shadow: 0 0 14px rgba(255,255,255,0.9), 0 0 30px rgba(255,0,90,0.7); }
  100% { text-shadow: 0 0 6px rgba(255,255,255,0.5), 0 0 15px rgba(255,0,90,0.4); }
}

.title-divider {
  height: 2px;
  width: 70%;
  margin: 10px auto 25px auto;
  background: linear-gradient(to right, transparent, rgba(255,255,255,0.7), transparent);
  border-radius: 2px;
  opacity: 0.7;
}

@keyframes winnerBounce {
  0% { transform: scale(1); }
  40% { transform: scale(1.15); }
  70% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

.bounce { animation: winnerBounce 0.4s ease; }

/* ðŸ”¥ WHITE INPUT FIX */
input {
  width: 100%;
  padding: 14px;
  margin: 10px 0;
  border-radius: 14px;
  border: none;
  outline: none;
  font-size: 16px;
  text-align: center;
  background: white;
  color: #c9184a;
  font-weight: bold;
}

input::placeholder {
  color: #c9184a;
  opacity: 0.6;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  border-radius: 14px;
  border: none;
  font-weight: bold;
  font-size: 16px;
  cursor: pointer;
}

button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.primary { background: white; color: #c9184a; }
.danger { background: #ff0a54; color: white; }

.hidden { display: none; }

.name-display {
  margin: 25px 0;
  font-size: 28px;
  font-weight: bold;
  min-height: 36px;
}

.question-box {
  margin-top: 15px;
  padding: 18px;
  border-radius: 18px;
  background: rgba(255,255,255,0.2);
  min-height: 80px;
}

.scoreboard {
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
  gap: 10px;
}

.player-card {
  flex: 1;
  background: rgba(255,255,255,0.15);
  padding: 12px;
  border-radius: 15px;
}

.player-name {
  font-size: 14px;
  opacity: 0.8;
}

.player-score {
  font-size: 24px;
  font-weight: bold;
}

.round-display {
  margin-top: 12px;
  font-size: 14px;
  opacity: 0.8;
}
</style>
</head>
<body>

<div class="container">

<h1 class="title">
  <span class="no">No</span>
  <span class="innocence">Innocence</span>
</h1>

<div class="title-divider"></div>

<div id="setup">
  <input id="player1" placeholder="Player 1 Name">
  <input id="player2" placeholder="Player 2 Name">
  <button class="primary" onclick="startGame()">Begin</button>
</div>

<div id="game" class="hidden">

  <div id="nameDisplay" class="name-display">Press Spin</div>

  <div id="questionBox" class="question-box">
    Question will appear here
  </div>

  <div id="actionArea">
    <button id="mainBtn" class="primary" onclick="handleMain()">Spin</button>
  </div>

  <!-- ðŸ”¥ NAMES ADDED ABOVE SCORES -->
  <div class="scoreboard">
    <div class="player-card">
      <div id="name1" class="player-name"></div>
      <div id="score1" class="player-score">0</div>
    </div>
    <div class="player-card">
      <div id="name2" class="player-name"></div>
      <div id="score2" class="player-score">0</div>
    </div>
  </div>

  <div id="roundDisplay" class="round-display"></div>

</div>
</div>

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}

const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playClick(freq = 1200, duration = 0.03) {
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.type = "square";
  osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
  gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.start();
  osc.stop(audioCtx.currentTime + duration);
}

let players = [];
let scores = {};
let currentPlayer = null;
let round = 0;
const maxRounds = 10;
let remaining = [];
let state = "waiting";
let spinning = false; // ðŸ”¥ spin lock

const questions = [
  "Have you ever wanted someone to take control?",
  "Whatâ€™s your favorite place to be kissed on your body?",
  "Have you ever flirted knowing it could cause drama?",
  "Whatâ€™s the most daring place youâ€™ve made out?",
  "Have you ever had a forbidden attraction?",
  "Whatâ€™s something subtle that turns you on?",
  "Have you ever crossed a line you said you wouldnâ€™t?",
  "Whatâ€™s the longest youâ€™ve gone without sex?",
  "Have you ever been someone's secret?",
  "Whatâ€™s your biggest weakness when it comes to attraction?",
  "Have you ever wanted someone purely for physical reasons?",
  "Whatâ€™s something that instantly makes your heart race?",
  "Have you ever flirted just for attention?",
  "Whatâ€™s the freakiest thing you've done alone?",
  "Have you ever made the first move?",
  "Whatâ€™s your ideal late-night scenario?",
  "Have you ever been dominated or wanted to be?",
  "Whatâ€™s something youâ€™ve done that would shock people?",
  "When was the last time you had sex?",
  "Have you ever enjoyed being chased?",
  "Whatâ€™s something youâ€™d only admit after midnight?",
  "Have you ever had chemistry with someone instantly?",
  "Whatâ€™s your favorite type of tension?",
  "Have you ever flirted with someone while in a relationship?",
  "Whatâ€™s the most intense attraction youâ€™ve ever felt?",
  "Have you ever tested someone to see how far theyâ€™d go?",
  "Whatâ€™s something you secretly crave but havenâ€™t admitted?",
  "Have you ever sent a risky text and regretted it?",
  "Whatâ€™s the most spontaneous thing youâ€™ve done?",
  "Have you ever been addicted to someone sexually?",
  "Whatâ€™s something that makes you instantly blush?",
  "Have you ever had a crush on a friendâ€™s partner?",
  "Whatâ€™s the boldest move youâ€™ve ever made on someone?",
  "Have you ever kept a relationship secret?",
  "Whatâ€™s something that makes you instantly crave someone?",
  "Have you ever had feelings for two people at once?",
  "When was the last time you masturbated?",
  "Whatâ€™s the most intense physical connection youâ€™ve had?",
  "Have you ever wanted someone who was completely off-limits?",
  "Whatâ€™s something youâ€™d try once just to say you did?",
  "Have you ever flirted to make someone jealous?",
  "Whatâ€™s your biggest turn-on?",
  "Have you ever faked being less experienced than you are?",
  "Where is the freakiest place you've had sex?",
  "Have you ever roleplayed?",
  "Whatâ€™s the boldest message youâ€™ve ever sent?",
  "Have you ever had a secret late-night conversation that went too far?",
  "Whatâ€™s your favorite type of compliment to receive?",
  "Have you ever wanted someone you couldnâ€™t have?",
  "Whatâ€™s something that drives you crazy in a good way?",
  "Have you ever used tension to your advantage?",
  "Whatâ€™s the most reckless thing youâ€™ve done for attraction?",
  "Have you ever had a one-night stand?",
  "Whatâ€™s something youâ€™d only do with someone you fully trust?",
  "Have you ever been turned on by the wrong person?",
  "Whatâ€™s your favorite body part on someone?",
  "Have you ever had a risky situation almost happen?",
  "Whatâ€™s your most dangerous weakness?",
  "Have you ever gotten really jealous?",
  "Whatâ€™s something youâ€™ve replayed in your head over and over?",
  "Have you ever flirted in public just for fun?",
  "When was the last time you kissed someone?",
  "Whatâ€™s the dirtiest thought youâ€™ve had about someone you know?",
  "Have you ever had a situation that almost went too far?",
  "Whatâ€™s the longest youâ€™ve teased someone on purpose?",
  "Have you ever caught feelings after hooking up?",
  "Whatâ€™s your favorite type of foreplay?",
  "Have you ever lied about your body count?",
  "Whatâ€™s something that always gets you in the mood?",
  "Where is the freakiest place you've masturbated?",
  "Have you ever pushed someoneâ€™s limits on purpose?",
  "Whatâ€™s something you wish someone would do to you?",
  "Have you ever fantasized about someone in this room?",
  "Whatâ€™s the most intense make-out session youâ€™ve had?",
  "Have you ever wanted something you knew you shouldnâ€™t?",
  "Whatâ€™s the most inappropriate place youâ€™ve felt turned on?",
  "Have you ever had a secret crush on someone you shouldnâ€™t have?",
  "Whatâ€™s something youâ€™ve done that youâ€™ve never told anyone?",
  "Have you ever been caught doing something naughty?",
  "Whatâ€™s the riskiest decision youâ€™ve made because you were turned on?",
  "Have you ever enjoyed making someone jealous?",
  "Whatâ€™s the most possessive youâ€™ve ever felt over someone?",
  "Whatâ€™s your biggest turn-off?",
  "Have you ever had a friends-with-benefits situation?",
  "Whatâ€™s something that makes you lose control?",
  "Have you ever wanted to test someoneâ€™s self-control?",
  "Whatâ€™s the freakiest thing you've done with someone?",
  "Have you ever hooked up with someone you just met?",
  "Whatâ€™s something youâ€™d try if you knew there were no consequences?",
  "Have you ever had a forbidden late-night moment?",
  "Have you ever had a forbidden attraction?",
  "Have you ever wanted someone to beg for you?",
  "When was the last time you got really horny?",
  "How many sex toys do you own?",
  "Have you ever used a sex toy?"
];

function startGame() {
  playClick();
  const p1 = player1.value.trim();
  const p2 = player2.value.trim();
  if (!p1 || !p2) return alert("Enter both names");

  players = [p1, p2];
  scores = { [p1]: 0, [p2]: 0 };
  remaining = [...questions];

  name1.innerText = p1;  // ðŸ”¥ show names
  name2.innerText = p2;

  setup.classList.add("hidden");
  game.classList.remove("hidden");
  updateScore();
}

function handleMain() {
  if (spinning) return; // ðŸ”¥ prevents spam
  playClick();

  if (state === "waiting") {
    spinPlayer();
    state = "spun";
    setMainButton("Reveal Question");
    return;
  }
  if (state === "spun") {
    showQuestion();
    state = "answering";
    return;
  }
  if (state === "answering") {
    state = "decision";
    showDecision();
    return;
  }
  if (state === "followup") {
    scores[currentPlayer] += 2;
    nextRound();
  }
}

function spinPlayer() {
  spinning = true; // ðŸ”¥ lock
  document.getElementById("mainBtn").disabled = true;

  let count = 0;
  let speed = 40;
  const totalFlips = 30;

  function animateSpin() {
    nameDisplay.innerText = players[count % 2];
    playClick(1000, 0.02);
    count++;
    if (count < totalFlips) {
      speed += 4;
      setTimeout(animateSpin, speed);
    } else {
      currentPlayer = players[Math.floor(Math.random()*2)];
      nameDisplay.innerText = currentPlayer;
      nameDisplay.classList.add("bounce");
      setTimeout(() => nameDisplay.classList.remove("bounce"), 400);
      playClick(700, 0.06);

      spinning = false; // ðŸ”¥ unlock
      document.getElementById("mainBtn").disabled = false;
    }
  }
  animateSpin();
}

function showQuestion() {
  if (remaining.length === 0) remaining = [...questions];
  const q = remaining.splice(Math.floor(Math.random()*remaining.length),1)[0];
  questionBox.innerText = q;
  actionArea.innerHTML = `
    <button class="primary" onclick="handleMain()">Finished Answer</button>
    <button class="danger" onclick="skipQuestion()">Skip (-1)</button>
  `;
}

function showDecision() {
  actionArea.innerHTML = `
    <button class="primary" onclick="accept()">Accept (+1)</button>
    <button class="danger" onclick="challenge()">Challenge (+2)</button>
  `;
}

function accept() { playClick(); scores[currentPlayer] += 1; nextRound(); }
function challenge() {
  playClick();
  state = "followup";
  actionArea.innerHTML = `<button class="primary" onclick="handleMain()">Answer Follow-Up (+2)</button>`;
}
function skipQuestion() { playClick(); scores[currentPlayer] -= 1; nextRound(); }

function nextRound() {
  round++;
  updateScore();
  if (round >= maxRounds) return;
  state = "waiting";
  currentPlayer = null;
  nameDisplay.innerText = "Press Spin";
  questionBox.innerText = "Question will appear here";
  setMainButton("Spin");
}

function setMainButton(text) {
  actionArea.innerHTML = `<button id="mainBtn" class="primary" onclick="handleMain()">${text}</button>`;
}

function updateScore() {
  score1.innerText = scores[players[0]];
  score2.innerText = scores[players[1]];
  roundDisplay.innerText = `Round ${round + 1} / ${maxRounds}`;
}
</script>
</body>
</html>